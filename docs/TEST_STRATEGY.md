TEST_STRATEGY.md (テスト方針)
1. テストの境界
単体テスト (Unit Test):

対象: packages/api内の純粋なビジネスロジック、apps/web/lib内のヘルパー関数（地理計算、時刻計算など）。

フレームワーク: Vitest

責務: Airtable APIやNext.jsの機能に依存せず、独立してロジックの正しさを検証する。

結合テスト (Integration Test):

対象: UIコンポーネントとAPIクライアントの連携。API Route Handlerとビジネスロジックの連携。

フレームワーク: React Testing Library, Mock Service Worker (MSW)

責務: コンポーネントが正しくAPIを呼び出し、レスポンスに応じてUIが変化することを検証する。

E2Eテスト (End-to-End Test):

対象: ユーザーの主要な操作フロー全体。

フレームワーク: Playwright

責務: UC-01からUC-03までのクリティカルパスが、実際のブラウザ（Chromium, WebKit）上で正常に動作することを保証する。

2. カバレッジ目標
単体テストにおけるコードカバレッジ（行単位）は 85% 以上を目標とする。

ただし、カバレッジの数値のみを追求せず、重要な分岐や境界値が網羅されているかを重視する。

3. クリティカルパス
以下のシナリオは、E2Eテストで必ずカバーするものとする。

正常系フロー:

未ログイン状態からログインし、出勤打刻を行い、退勤打刻を完了させる一連のフロー。

異常系フロー:

無効なmachineidでアクセスした場合にエラー画面が表示されること。

ログインに失敗した場合にエラーメッセージが表示されること。

4. 失敗時の証跡
CI/CDパイプライン上でE2Eテストが失敗した場合、以下の成果物をアーティファクトとして自動的に保存する。

失敗時点のスクリーンショット

Playwrightのトレースビューア用ファイル

ブラウザのコンソールログ